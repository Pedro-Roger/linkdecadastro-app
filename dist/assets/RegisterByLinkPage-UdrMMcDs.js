import{j as e,L as j}from"./index-Db6jo_5u.js";import{d,i as v}from"./react-vendor-40RSlyA9.js";import{u as N,o as w,n as f,s as o,e as F}from"./form-vendor-UKDbifrO.js";import{t as k}from"./zod-Bd6eNPbn.js";import{a as p}from"./api-cc_Vofyw.js";import{F as T}from"./Footer-C718gNe_.js";import{S as C}from"./SeoMetaTags-ClWUUb7L.js";import"./ui-vendor-VWVTWWFz.js";const S=w({name:o().min(1,"Nome é obrigatório"),cpf:o().min(11,"CPF inválido").max(11,"CPF inválido"),phone:o().min(10,"Telefone inválido"),email:o().email("Email inválido"),cep:o().min(8,"CEP inválido").max(8,"CEP inválido"),locality:o().min(1,"Localidade é obrigatória"),city:o().min(1,"Cidade é obrigatória"),state:o().min(2,"Estado é obrigatório").max(2,"Estado inválido"),participantType:F(["PRODUTOR","OUTROS"]),otherType:o().optional(),pondCount:f().optional(),waterDepth:f().optional()}).refine(n=>n.participantType==="PRODUTOR"?n.pondCount!==void 0&&n.waterDepth!==void 0:!0,{message:"Campos de produtor são obrigatórios",path:["pondCount"]});function E({eventId:n}){const[a,s]=d.useState(!1),[m,x]=d.useState(!1),[l,c]=d.useState(null),{register:r,handleSubmit:i,watch:u,formState:{errors:t}}=N({resolver:k(S)}),g=u("participantType"),h=async y=>{s(!0),c(null);try{await p("/registrations",{method:"POST",body:JSON.stringify({...y,eventId:n})}),x(!0)}catch(b){c(b instanceof Error?b.message:"Erro ao processar cadastro")}finally{s(!1)}};return m?e.jsxs("div",{className:"text-center py-8",children:[e.jsx("div",{className:"text-green-600 text-2xl font-bold mb-4",children:"✓ Cadastro realizado com sucesso!"}),e.jsx("p",{className:"text-gray-600",children:"Você receberá um email de confirmação em breve."})]}):e.jsxs("form",{onSubmit:i(h),className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Nome Completo *"}),e.jsx("input",{...r("name"),className:"w-full px-4 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-[#FF6600] focus:border-transparent text-gray-900"}),t.name&&e.jsx("p",{className:"text-red-500 text-sm mt-1",children:t.name.message})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"CPF *"}),e.jsx("input",{...r("cpf"),maxLength:11,className:"w-full px-4 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-[#FF6600] focus:border-transparent text-gray-900"}),t.cpf&&e.jsx("p",{className:"text-red-500 text-sm mt-1",children:t.cpf.message})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Telefone *"}),e.jsx("input",{...r("phone"),className:"w-full px-4 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-[#FF6600] focus:border-transparent text-gray-900"}),t.phone&&e.jsx("p",{className:"text-red-500 text-sm mt-1",children:t.phone.message})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"E-mail *"}),e.jsx("input",{type:"email",...r("email"),className:"w-full px-4 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-[#FF6600] focus:border-transparent text-gray-900"}),t.email&&e.jsx("p",{className:"text-red-500 text-sm mt-1",children:t.email.message})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"CEP *"}),e.jsx("input",{...r("cep"),maxLength:8,className:"w-full px-4 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-[#FF6600] focus:border-transparent text-gray-900"}),t.cep&&e.jsx("p",{className:"text-red-500 text-sm mt-1",children:t.cep.message})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Localidade/Bairro *"}),e.jsx("input",{...r("locality"),className:"w-full px-4 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-[#FF6600] focus:border-transparent text-gray-900"}),t.locality&&e.jsx("p",{className:"text-red-500 text-sm mt-1",children:t.locality.message})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Cidade *"}),e.jsx("input",{...r("city"),className:"w-full px-4 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-[#FF6600] focus:border-transparent text-gray-900"}),t.city&&e.jsx("p",{className:"text-red-500 text-sm mt-1",children:t.city.message})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Estado *"}),e.jsx("input",{...r("state"),maxLength:2,placeholder:"CE",className:"w-full px-4 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-[#FF6600] focus:border-transparent text-gray-900"}),t.state&&e.jsx("p",{className:"text-red-500 text-sm mt-1",children:t.state.message})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2 md:text-base",children:"Selecione a opção que melhor descreve você *"}),e.jsxs("select",{...r("participantType"),className:"w-full px-4 py-3 text-base border border-gray-300 rounded-md focus:ring-2 focus:ring-[#FF6600] focus:border-transparent text-gray-900 md:py-2 md:text-sm appearance-none bg-white cursor-pointer min-h-[48px] touch-manipulation",style:{backgroundImage:`url("data:image/svg+xml,%3csvg xmlns='http://www.w3.org/2000/svg' fill='none' viewBox='0 0 20 20'%3e%3cpath stroke='%236b7280' stroke-linecap='round' stroke-linejoin='round' stroke-width='1.5' d='M6 8l4 4 4-4'/%3e%3c/svg%3e")`,backgroundPosition:"right 0.75rem center",backgroundRepeat:"no-repeat",backgroundSize:"1.5em 1.5em",paddingRight:"2.5rem"},children:[e.jsx("option",{value:"",children:"Selecione..."}),e.jsx("option",{value:"PRODUTOR",children:"Produtor"}),e.jsx("option",{value:"OUTROS",children:"Outros"})]}),t.participantType&&e.jsx("p",{className:"text-red-500 text-sm mt-1",children:t.participantType.message})]}),g==="PRODUTOR"&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Quantidade de Viveiros *"}),e.jsx("input",{type:"number",...r("pondCount",{valueAsNumber:!0}),className:"w-full px-4 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-[#FF6600] focus:border-transparent text-gray-900"}),t.pondCount&&e.jsx("p",{className:"text-red-500 text-sm mt-1",children:t.pondCount.message})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Lâmina d'água (metros) *"}),e.jsx("input",{type:"number",step:"0.01",...r("waterDepth",{valueAsNumber:!0}),className:"w-full px-4 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-[#FF6600] focus:border-transparent text-gray-900"}),t.waterDepth&&e.jsx("p",{className:"text-red-500 text-sm mt-1",children:t.waterDepth.message})]})]}),g==="OUTROS"&&e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"O que você é? *"}),e.jsx("input",{...r("otherType"),className:"w-full px-4 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-[#FF6600] focus:border-transparent text-gray-900"}),t.otherType&&e.jsx("p",{className:"text-red-500 text-sm mt-1",children:t.otherType.message})]}),l&&e.jsx("div",{className:"bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded",children:l}),e.jsx("button",{type:"submit",disabled:a,className:"w-full bg-[#FF6600] text-white py-3 px-6 rounded-md font-semibold hover:bg-[#e55a00] transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:a?"Enviando...":"Confirmar Cadastro"})]})}function q(){const a=v().linkId,[s,m]=d.useState(null),[x,l]=d.useState(!0);if(d.useEffect(()=>{async function r(){try{let i;try{i=await p(`/events/slug/${a}`)}catch{i=await p(`/events/link/${a}`)}m(i)}catch{}finally{l(!1)}}a&&r()},[a]),x)return e.jsx(j,{});if(!s)return e.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gradient-to-br from-[#003366] to-[#FF6600]",children:e.jsx("div",{className:"text-white text-xl",children:"Evento não encontrado"})});const c=typeof window<"u"?`${window.location.origin}/register/${a}`:`/register/${a}`;return e.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-[#003366] to-[#FF6600]",children:[e.jsx(C,{title:s?`${s.title} - Link de Cadastro`:"Cadastro - Link de Cadastro",description:s?.description||"Faça seu cadastro neste evento",image:s?.bannerUrl,url:c,type:"website"}),s.bannerUrl&&e.jsx("div",{className:"w-full h-64 md:h-96 bg-cover bg-center",style:{backgroundImage:`url(${s.bannerUrl})`}}),e.jsx("div",{className:"container mx-auto px-4 py-8",children:e.jsxs("div",{className:"max-w-2xl mx-auto bg-white rounded-lg shadow-lg p-8",children:[e.jsx("h1",{className:"text-3xl font-bold mb-4 text-[#003366]",children:s.title}),e.jsx("p",{className:"text-gray-600 mb-8",children:s.description}),e.jsx(E,{eventId:s.id})]})}),e.jsx(T,{})]})}export{q as default};
