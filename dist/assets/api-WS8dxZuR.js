const d=()=>typeof window<"u"&&window.APP_CONFIG?.API_URL?window.APP_CONFIG.API_URL:"http://localhost:3333",f=d();async function u(e,{auth:a,headers:i,...c}={}){const w=e.startsWith("http")?e:`${f}${e}`,n={"Content-Type":"application/json",...i||{}};if(a&&typeof window<"u"){const t=localStorage.getItem("token");t&&(n.Authorization=`Bearer ${t}`)}const o=await fetch(w,{...c,headers:n,mode:"cors"});if(!o.ok){let t="Erro na requisição";try{const s=await o.json();t=s.message||s.error||t}catch{t=o.statusText||t}const r=new Error(t);throw r.status=o.status,r}return await o.json()}export{u as a,d as g};
