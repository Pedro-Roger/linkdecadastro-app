import{u as Re,j as e,L as Se}from"./index-Db6jo_5u.js";import{i as Ue,u as ke,d as a,L as v}from"./react-vendor-40RSlyA9.js";import{u as ue,o as be,n as Te,s as d,l as pe,b as _,e as xe}from"./form-vendor-UKDbifrO.js";import{t as ge}from"./zod-Bd6eNPbn.js";import{N as De}from"./NotificationBell-CNOtkmWq.js";import{F as Ie}from"./Footer-C718gNe_.js";import{a as f,n as Z,g as Pe}from"./api-cc_Vofyw.js";import"./ui-vendor-VWVTWWFz.js";import"./utils-vendor-DwAQI6Fw.js";const Ve=be({title:d().min(1,"Título é obrigatório"),description:d().optional(),videoUrl:d().url("URL do YouTube inválida"),bannerUrl:d().optional().or(pe("")).refine(r=>!r||r.trim()===""?!0:r.startsWith("/")||r.startsWith("http://")||r.startsWith("https://"),{message:"URL inválida"}),duration:d().optional(),order:Te().int().min(0)}),ze=be({title:d().min(1,"Título é obrigatório"),description:d().optional(),bannerUrl:d().optional().or(pe("")).transform(r=>r&&r.trim()?r.trim():void 0).refine(r=>!r||r.startsWith("/")||r.startsWith("http://")||r.startsWith("https://"),{message:"URL inválida"}),status:xe(["ACTIVE","INACTIVE"]).default("ACTIVE"),type:xe(["PRESENCIAL","ONLINE"]).default("ONLINE"),maxEnrollments:d().optional().transform(r=>{if(!r||!r.trim())return null;const g=parseInt(r,10);return Number.isNaN(g)?null:g}),waitlistEnabled:_().optional(),waitlistLimit:d().optional().transform(r=>{if(!r||!r.trim())return 0;const g=parseInt(r,10);return Number.isNaN(g)?0:g}),regionRestrictionEnabled:_().optional(),allowAllRegions:_().optional(),defaultRegionLimit:d().optional().transform(r=>{if(!r||!r.trim())return null;const g=parseInt(r,10);return Number.isNaN(g)?null:g}),startDate:d().optional(),endDate:d().optional(),slug:d().optional().refine(r=>!r||/^[a-z0-9-]+$/.test(r),{message:"URL personalizada deve conter apenas letras minúsculas, números e hífens"})}),Oe=[{sigla:"AC",nome:"Acre"},{sigla:"AL",nome:"Alagoas"},{sigla:"AP",nome:"Amapá"},{sigla:"AM",nome:"Amazonas"},{sigla:"BA",nome:"Bahia"},{sigla:"CE",nome:"Ceará"},{sigla:"DF",nome:"Distrito Federal"},{sigla:"ES",nome:"Espírito Santo"},{sigla:"GO",nome:"Goiás"},{sigla:"MA",nome:"Maranhão"},{sigla:"MT",nome:"Mato Grosso"},{sigla:"MS",nome:"Mato Grosso do Sul"},{sigla:"MG",nome:"Minas Gerais"},{sigla:"PA",nome:"Pará"},{sigla:"PB",nome:"Paraíba"},{sigla:"PR",nome:"Paraná"},{sigla:"PE",nome:"Pernambuco"},{sigla:"PI",nome:"Piauí"},{sigla:"RJ",nome:"Rio de Janeiro"},{sigla:"RN",nome:"Rio Grande do Norte"},{sigla:"RS",nome:"Rio Grande do Sul"},{sigla:"RO",nome:"Rondônia"},{sigla:"RR",nome:"Roraima"},{sigla:"SC",nome:"Santa Catarina"},{sigla:"SP",nome:"São Paulo"},{sigla:"SE",nome:"Sergipe"},{sigla:"TO",nome:"Tocantins"}];function He(){const r=Ue(),g=ke(),{user:z,loading:O,isAuthenticated:H,signOut:he}=Re({requireAuth:!0,redirectTo:"/login"}),x=r.courseId,[M,K]=a.useState(null),[B,fe]=a.useState([]),[$,S]=a.useState(!1),[w,U]=a.useState(null),[X,q]=a.useState(!1),[ee,y]=a.useState(null),[k,te]=a.useState(!1),[h,c]=a.useState(null),[Q,G]=a.useState(!1),[se,W]=a.useState(!1),[re,E]=a.useState(null),[F,T]=a.useState([]),[o,C]=a.useState({state:"",city:"",limit:"",waitlistLimit:""}),[ae,J]=a.useState(null),{register:j,handleSubmit:ye,formState:{errors:p},reset:L,setValue:m,watch:ie}=ue({resolver:ge(Ve),defaultValues:{order:0}}),{register:n,handleSubmit:je,formState:{errors:N},reset:Me,setValue:l,watch:D}=ue({resolver:ge(ze),defaultValues:{status:"ACTIVE",type:"ONLINE",waitlistEnabled:!1,waitlistLimit:0,regionRestrictionEnabled:!1,allowAllRegions:!0}}),Ne=D("waitlistEnabled"),ve=D("regionRestrictionEnabled");D("allowAllRegions");const le=D("bannerUrl"),I=ie("videoUrl"),A=ie("bannerUrl"),oe=t=>{const s=[/(?:youtube\.com\/watch\?v=|youtu\.be\/|youtube\.com\/embed\/)([^&\n?#]+)/,/youtube\.com\/watch\?.*v=([^&\n?#]+)/];for(const i of s){const u=t.match(i);if(u&&u[1])return`https://img.youtube.com/vi/${u[1]}/maxresdefault.jpg`}return null};a.useEffect(()=>{if(I&&I.trim()){const t=oe(I);t&&(!A||A==="")&&(m("bannerUrl",t,{shouldValidate:!1}),c(t))}},[I,A,m]);const ne=async(t,s=!1)=>{te(!0),y(null),E(null);try{if(!t.type.startsWith("image/"))throw new Error("Apenas imagens são permitidas");const i=5*1024*1024;if(t.size>i)throw new Error("Arquivo muito grande. Máximo: 5MB");const u=new FormData;u.append("file",t);const b=typeof window<"u"?localStorage.getItem("token"):null,Y=await fetch(`${Pe()}/admin/upload`,{method:"POST",headers:b?{Authorization:`Bearer ${b}`}:void 0,body:u});if(!Y.ok){let ce="Erro ao fazer upload";try{const me=await Y.json();me?.error&&(ce=me.error)}catch{}throw new Error(ce)}const V=await Y.json();s?(l("bannerUrl",V.url,{shouldValidate:!0}),c(V.url)):(m("bannerUrl",V.url,{shouldValidate:!0}),c(V.url))}catch(i){const u=i instanceof Error?i.message:"Erro ao fazer upload";s?E(u):y(u)}finally{te(!1)}},we=()=>{if(!o.state||!o.limit.trim()){J("Selecione o estado e informe o limite de vagas.");return}const t=parseInt(o.limit,10);if(Number.isNaN(t)||t<=0){J("Informe um limite de vagas válido (maior que zero).");return}const s=o.waitlistLimit?parseInt(o.waitlistLimit,10):0;T(i=>[...i,{state:o.state,city:o.city.trim(),limit:t,waitlistLimit:Number.isNaN(s)||s<0?0:s}]),C({state:"",city:"",limit:"",waitlistLimit:""}),J(null)},Ee=t=>{T(s=>s.filter((i,u)=>u!==t))},R=a.useCallback(async()=>{try{const t=await f(`/admin/courses/${x}`,{auth:!0});K(t),t&&(l("title",t.title),l("description",t.description||""),l("bannerUrl",t.bannerUrl||""),l("status",t.status||"ACTIVE"),l("type",t.type||"ONLINE"),l("maxEnrollments",t.maxEnrollments?String(t.maxEnrollments):""),l("waitlistEnabled",t.waitlistEnabled||!1),l("waitlistLimit",t.waitlistLimit?String(t.waitlistLimit):"0"),l("regionRestrictionEnabled",t.regionRestrictionEnabled||!1),l("allowAllRegions",t.allowAllRegions??!0),l("defaultRegionLimit",t.defaultRegionLimit?String(t.defaultRegionLimit):""),l("startDate",t.startDate?t.startDate.split("T")[0]:""),l("endDate",t.endDate?t.endDate.split("T")[0]:""),l("slug",t.slug||""),t.bannerUrl&&c(t.bannerUrl),t.regionQuotas&&t.regionQuotas.length>0?T(t.regionQuotas.map(s=>({id:s.id,state:s.state,city:s.city||"",limit:s.limit,waitlistLimit:s.waitlistLimit||0}))):T([]))}catch{}},[x,l]),Fe=a.useCallback(async t=>{W(!0),E(null);try{if(t.regionRestrictionEnabled&&F.length===0){E("Adicione pelo menos uma região com limite de vagas ou desative a restrição regional."),W(!1);return}const s=t.bannerUrl&&t.bannerUrl.trim()||h&&h.trim()||void 0,i={title:t.title,description:t.description||void 0,bannerUrl:s,status:t.status||"ACTIVE",type:t.type||"ONLINE",maxEnrollments:t.maxEnrollments&&typeof t.maxEnrollments=="number"?t.maxEnrollments:null,waitlistEnabled:t.waitlistEnabled??!1,waitlistLimit:typeof t.waitlistLimit=="number"&&t.waitlistLimit>=0?t.waitlistLimit:0,regionRestrictionEnabled:t.regionRestrictionEnabled??!1,allowAllRegions:t.regionRestrictionEnabled??!1?t.allowAllRegions??!0:!0,defaultRegionLimit:typeof t.defaultRegionLimit=="number"&&t.defaultRegionLimit>0?t.defaultRegionLimit:null,startDate:t.startDate&&t.startDate.trim()?t.startDate:void 0,endDate:t.endDate&&t.endDate.trim()?t.endDate:void 0,slug:t.slug&&t.slug.trim()?t.slug.trim().toLowerCase():void 0,regionQuotas:t.regionRestrictionEnabled?F.map(b=>({id:b.id||null,state:b.state,city:b.city||null,limit:b.limit,waitlistLimit:b.waitlistLimit??0})):[]},u=await f(`/admin/courses/${x}`,{method:"PUT",auth:!0,body:JSON.stringify(i)});K(u),G(!1),alert("Curso atualizado com sucesso!"),R()}catch(s){const i=s instanceof Error?s.message:"Erro ao atualizar curso";E(i),alert(i)}finally{W(!1)}},[x,F,h,R]),P=a.useCallback(async()=>{try{const t=await f(`/admin/courses/${x}/lessons`,{auth:!0});fe(t),L({order:t.length})}catch{}},[x,L]);a.useEffect(()=>{O||(!H||z?.role!=="ADMIN"?g("/my-courses"):x&&(R(),P()))},[O,H,z,x,R,P,g]);const Ce=async t=>{q(!0),y(null);try{w?await f(`/admin/courses/${x}/lessons/${w}`,{method:"PUT",auth:!0,body:JSON.stringify(t)}):await f(`/admin/courses/${x}/lessons`,{method:"POST",auth:!0,body:JSON.stringify(t)}),L(),S(!1),U(null),c(null),P()}catch(s){y(s instanceof Error?s.message:"Erro ao salvar aula")}finally{q(!1)}},Le=async t=>{try{const s=await f(`/admin/courses/${x}/lessons/${t}`,{auth:!0});m("title",s.title),m("description",s.description||""),m("videoUrl",s.videoUrl),m("bannerUrl",s.bannerUrl||""),m("duration",s.duration||""),m("order",s.order),U(t),c(s.bannerUrl||null),S(!0),window.scrollTo({top:0,behavior:"smooth"})}catch{y("Erro ao carregar aula para edição")}},Ae=async t=>{if(confirm("Tem certeza que deseja excluir esta aula?"))try{await f(`/admin/courses/${x}/lessons/${t}`,{method:"DELETE",auth:!0}),P()}catch(s){y(s instanceof Error?s.message:"Erro ao excluir aula")}},de=()=>{L(),S(!1),U(null),c(null)};return O||!M?e.jsx(Se,{}):e.jsxs("div",{className:"min-h-screen bg-gray-50 flex flex-col",children:[e.jsx("header",{className:"bg-white shadow-sm sticky top-0 z-50",children:e.jsx("div",{className:"container mx-auto px-4 py-2",children:e.jsxs("div",{className:"flex flex-col md:flex-row items-center justify-between space-y-2 md:space-y-0",children:[e.jsx(v,{to:"/",className:"flex items-center",children:e.jsx("img",{src:"/logo B.png",alt:"Link de Cadastro",className:"h-20 md:h-24 w-auto object-contain"})}),e.jsxs("nav",{className:"flex items-center space-x-4 md:space-x-6 text-sm md:text-base",children:[e.jsx(v,{to:"/admin/dashboard",className:"text-gray-700 hover:text-[#FF6600]",children:"Dashboard"}),e.jsx(v,{to:"/admin/courses",className:"text-gray-700 hover:text-[#FF6600]",children:"Cursos"}),e.jsx(v,{to:"/admin/events",className:"text-gray-700 hover:text-[#FF6600]",children:"Eventos"}),e.jsx(De,{}),e.jsx(v,{to:"/profile",className:"w-8 h-8 md:w-10 md:h-10 rounded-full bg-[#FF6600] text-white font-bold flex items-center justify-center",children:z?.name?.charAt(0).toUpperCase()||"A"}),e.jsx("button",{onClick:()=>he(),className:"bg-red-500 text-white px-4 py-2 rounded-md font-semibold hover:bg-red-600 transition-colors text-sm md:text-base",children:"Sair"})]})]})})}),e.jsxs("div",{className:"container mx-auto px-4 py-8 pb-24 md:pb-8 flex-1",children:[e.jsxs("div",{className:"mb-8",children:[e.jsx(v,{to:"/admin/courses",className:"text-[#FF6600] hover:underline mb-4 inline-block",children:"← Voltar para Cursos"}),e.jsxs("div",{className:"flex justify-between items-start mb-4",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-[#003366]",children:M?.title||"Carregando..."}),e.jsx("p",{className:"text-gray-600 mt-2",children:M?.description})]}),e.jsx("button",{onClick:()=>G(!Q),className:"bg-[#FF6600] text-white px-6 py-2 rounded-md font-semibold hover:bg-[#e55a00] transition-colors",children:Q?"✕ Fechar Edição":"✏️ Editar Curso"})]}),Q&&e.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6 mb-6",children:[e.jsx("h2",{className:"text-2xl font-bold text-[#003366] mb-6",children:"Editar Curso"}),e.jsxs("form",{onSubmit:je(Fe),className:"space-y-6",children:[re&&e.jsx("div",{className:"bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded",children:re}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Título do Curso *"}),e.jsx("input",{...n("title"),className:"w-full px-4 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-[#FF6600] focus:border-transparent text-gray-900"}),N.title&&e.jsx("p",{className:"text-red-500 text-sm mt-1",children:N.title.message})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Descrição (opcional)"}),e.jsx("textarea",{...n("description"),rows:4,className:"w-full px-4 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-[#FF6600] focus:border-transparent text-gray-900",placeholder:"Descreva o curso..."})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Banner do Curso (opcional)"}),e.jsx("p",{className:"text-xs text-gray-500 mb-2",children:"Formatos aceitos: JPG, PNG, GIF. Tamanho máximo: 5MB."}),e.jsxs("div",{className:"space-y-3",children:[e.jsx("input",{type:"file",accept:"image/jpeg,image/jpg,image/png,image/gif,image/webp",onChange:t=>{const s=t.target.files?.[0];s&&ne(s,!0)},disabled:k,className:"w-full px-4 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-[#FF6600] focus:border-transparent text-gray-900 disabled:opacity-50"}),k&&e.jsx("p",{className:"text-sm text-blue-600",children:"Fazendo upload..."}),e.jsx("input",{type:"text",...n("bannerUrl"),placeholder:"Ou informe a URL do banner",className:"w-full px-4 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-[#FF6600] focus:border-transparent text-gray-900",onChange:t=>{const s=t.target.value.trim()||"";l("bannerUrl",s,{shouldValidate:!1}),s&&c(s)}}),(le||h)&&e.jsxs("div",{className:"mt-3",children:[e.jsx("p",{className:"text-sm text-gray-600 mb-2",children:"Preview:"}),e.jsx("img",{src:Z(le||h||""),alt:"Preview do banner",className:"w-full h-48 object-cover rounded-md border border-gray-300",onError:()=>c(null)})]})]}),N.bannerUrl&&e.jsx("p",{className:"text-red-500 text-sm mt-1",children:N.bannerUrl.message})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Status *"}),e.jsxs("select",{...n("status"),className:"w-full px-4 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-[#FF6600] focus:border-transparent text-gray-900",children:[e.jsx("option",{value:"ACTIVE",children:"Ativo"}),e.jsx("option",{value:"INACTIVE",children:"Inativo"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Tipo *"}),e.jsxs("select",{...n("type"),className:"w-full px-4 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-[#FF6600] focus:border-transparent text-gray-900",children:[e.jsx("option",{value:"ONLINE",children:"Online"}),e.jsx("option",{value:"PRESENCIAL",children:"Presencial"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Limite de Vagas (opcional)"}),e.jsx("input",{type:"number",min:"1",...n("maxEnrollments"),className:"w-full px-4 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-[#FF6600] focus:border-transparent text-gray-900",placeholder:"Ex: 50"}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Deixe em branco para ilimitado"})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Data de Início (opcional)"}),e.jsx("input",{type:"date",...n("startDate"),className:"w-full px-4 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-[#FF6600] focus:border-transparent text-gray-900"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Data de Término (opcional)"}),e.jsx("input",{type:"date",...n("endDate"),className:"w-full px-4 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-[#FF6600] focus:border-transparent text-gray-900"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"URL Personalizada (opcional)"}),e.jsx("input",{type:"text",...n("slug"),placeholder:"ex: meu-curso-online",className:"w-full px-4 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-[#FF6600] focus:border-transparent text-gray-900"}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Apenas letras minúsculas, números e hífens"}),N.slug&&e.jsx("p",{className:"text-red-500 text-sm mt-1",children:N.slug.message})]}),e.jsxs("div",{className:"rounded-lg border border-gray-200 bg-white p-4 shadow-sm",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold text-[#003366]",children:"Lista de Espera"}),e.jsx("p",{className:"text-sm text-gray-500",children:"Permita que interessados entrem em uma lista de espera"})]}),e.jsxs("label",{className:"inline-flex items-center gap-2",children:[e.jsx("input",{type:"checkbox",...n("waitlistEnabled"),className:"h-5 w-5 rounded border-gray-300 text-[#FF6600] focus:ring-[#FF6600]"}),"Ativar"]})]}),Ne&&e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Limite de vagas na lista de espera"}),e.jsx("input",{type:"number",min:"0",...n("waitlistLimit"),className:"w-full rounded-md border border-gray-300 px-4 py-2 text-gray-900 focus:border-transparent focus:ring-2 focus:ring-[#FF6600]",placeholder:"Ex: 10"}),e.jsx("p",{className:"mt-1 text-xs text-gray-500",children:"Use 0 para ilimitado"})]})]}),e.jsxs("div",{className:"rounded-lg border border-gray-200 bg-white p-4 shadow-sm space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold text-[#003366]",children:"Restrição por Região"}),e.jsx("p",{className:"text-sm text-gray-500",children:"Defina limites de vagas por estado/cidade"})]}),e.jsxs("label",{className:"inline-flex items-center gap-2",children:[e.jsx("input",{type:"checkbox",...n("regionRestrictionEnabled"),className:"h-5 w-5 rounded border-gray-300 text-[#FF6600] focus:ring-[#FF6600]"}),"Ativar"]})]}),ve&&e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-1 gap-4 md:grid-cols-2",children:[e.jsxs("label",{className:"flex items-center gap-2 text-sm font-medium text-gray-700",children:[e.jsx("input",{type:"checkbox",...n("allowAllRegions"),className:"h-5 w-5 rounded border-gray-300 text-[#FF6600] focus:ring-[#FF6600]"}),"Permitir inscrições fora das regiões listadas"]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Limite padrão por região (opcional)"}),e.jsx("input",{type:"number",min:"0",...n("defaultRegionLimit"),className:"w-full rounded-md border border-gray-300 px-4 py-2 text-gray-900 focus:border-transparent focus:ring-2 focus:ring-[#FF6600]",placeholder:"Ex: 30"})]})]}),e.jsxs("div",{className:"rounded-md border border-dashed border-gray-300 p-4",children:[e.jsx("h4",{className:"text-sm font-semibold text-[#003366] mb-3",children:"Adicionar limite por região"}),ae&&e.jsx("div",{className:"bg-red-50 border border-red-200 text-red-700 px-3 py-2 rounded mb-3 text-sm",children:ae}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-3",children:[e.jsxs("select",{value:o.state,onChange:t=>C({...o,state:t.target.value}),className:"px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-[#FF6600] text-gray-900",children:[e.jsx("option",{value:"",children:"Estado *"}),Oe.map(t=>e.jsx("option",{value:t.sigla,children:t.nome},t.sigla))]}),e.jsx("input",{type:"text",value:o.city,onChange:t=>C({...o,city:t.target.value}),placeholder:"Cidade (opcional)",className:"px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-[#FF6600] text-gray-900"}),e.jsx("input",{type:"number",min:"1",value:o.limit,onChange:t=>C({...o,limit:t.target.value}),placeholder:"Limite de vagas *",className:"px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-[#FF6600] text-gray-900"}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("input",{type:"number",min:"0",value:o.waitlistLimit,onChange:t=>C({...o,waitlistLimit:t.target.value}),placeholder:"Lista espera",className:"flex-1 px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-[#FF6600] text-gray-900"}),e.jsx("button",{type:"button",onClick:we,className:"bg-[#FF6600] text-white px-4 py-2 rounded-md hover:bg-[#e55a00] transition-colors text-sm whitespace-nowrap",children:"Adicionar"})]})]})]}),F.length>0&&e.jsxs("div",{className:"mt-4",children:[e.jsx("h4",{className:"text-sm font-semibold text-[#003366] mb-2",children:"Regiões configuradas:"}),e.jsx("div",{className:"space-y-2",children:F.map((t,s)=>e.jsxs("div",{className:"flex items-center justify-between bg-gray-50 p-3 rounded-md",children:[e.jsxs("div",{children:[e.jsx("span",{className:"font-medium",children:t.state}),t.city&&e.jsxs("span",{children:[" - ",t.city]}),e.jsxs("span",{className:"text-gray-600 ml-2",children:["(",t.limit," vagas"]}),t.waitlistLimit>0&&e.jsxs("span",{children:[", ",t.waitlistLimit," lista de espera"]}),e.jsx("span",{children:")"})]}),e.jsx("button",{type:"button",onClick:()=>Ee(s),className:"text-red-600 hover:text-red-800 text-sm",children:"Remover"})]},s))})]})]})]}),e.jsxs("div",{className:"flex gap-3 pt-4 border-t",children:[e.jsx("button",{type:"submit",disabled:se,className:"flex-1 bg-[#FF6600] text-white py-2 px-4 rounded-md font-semibold hover:bg-[#e55a00] transition-colors disabled:opacity-50",children:se?"Salvando...":"Salvar Alterações"}),e.jsx("button",{type:"button",onClick:()=>{G(!1),R()},className:"px-6 py-2 border border-gray-300 rounded-md text-gray-700 hover:bg-gray-50 transition-colors",children:"Cancelar"})]})]})]})]}),e.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6 mb-6",children:[e.jsxs("div",{className:"flex justify-between items-center mb-4",children:[e.jsx("h2",{className:"text-xl font-semibold text-[#003366]",children:"Aulas do Curso"}),e.jsx("button",{onClick:()=>{$?de():(S(!0),U(null),L({order:B.length}))},className:"bg-[#FF6600] text-white px-4 py-2 rounded-md hover:bg-[#e55a00] transition-colors",children:$?"Cancelar":"+ Adicionar Aula"})]}),$&&e.jsxs("form",{onSubmit:ye(Ce),className:"space-y-4 mb-6 p-4 bg-gray-50 rounded-lg",children:[w&&e.jsxs("div",{className:"bg-blue-50 border border-blue-200 text-blue-700 px-4 py-2 rounded mb-4",children:[e.jsx("strong",{children:"Editando aula:"}),' Você está editando uma aula existente. As alterações serão salvas quando você clicar em "Salvar Aula".']}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Título da Aula *"}),e.jsx("input",{...j("title"),className:"w-full px-4 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-[#FF6600] focus:border-transparent text-gray-900"}),p.title&&e.jsx("p",{className:"text-red-500 text-sm mt-1",children:p.title.message})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:e.jsxs("span",{className:"flex items-center gap-2",children:[e.jsx("svg",{className:"w-5 h-5 text-red-600",fill:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{d:"M23.498 6.186a3.016 3.016 0 0 0-2.122-2.136C19.505 3.545 12 3.545 12 3.545s-7.505 0-9.377.505A3.017 3.017 0 0 0 .502 6.186C0 8.07 0 12 0 12s0 3.93.502 5.814a3.016 3.016 0 0 0 2.122 2.136c1.871.505 9.376.505 9.376.505s7.505 0 9.377-.505a3.015 3.015 0 0 0 2.122-2.136C24 15.93 24 12 24 12s0-3.93-.502-5.814zM9.545 15.568V8.432L15.818 12l-6.273 3.568z"})}),"Link do Vídeo do YouTube *"]})}),e.jsx("input",{type:"text",...j("videoUrl"),placeholder:"Cole aqui o link do YouTube (ex: https://www.youtube.com/watch?v=... ou https://youtu.be/...)",className:"w-full px-4 py-3 border-2 border-gray-300 rounded-md focus:ring-2 focus:ring-[#FF6600] focus:border-[#FF6600] text-gray-900",onChange:t=>{const s=t.target.value;if(m("videoUrl",s,{shouldValidate:!1}),s&&s.trim()){const i=oe(s);i&&(!A||A==="")&&(m("bannerUrl",i,{shouldValidate:!1}),c(i))}}}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Aceita links do YouTube em qualquer formato: youtube.com/watch?v=..., youtu.be/..., ou youtube.com/embed/..."}),p.videoUrl&&e.jsx("p",{className:"text-red-500 text-sm mt-1",children:p.videoUrl.message})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Banner/Thumbnail da Aula (opcional)"}),e.jsx("p",{className:"text-xs text-gray-500 mb-2",children:"O banner será extraído automaticamente do YouTube quando você inserir o link do vídeo. Ou você pode fazer upload de uma imagem personalizada."}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{children:[e.jsx("input",{type:"file",accept:"image/*",onChange:t=>{const s=t.target.files?.[0];s&&ne(s,!1)},disabled:k,className:"w-full px-4 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-[#FF6600] focus:border-transparent text-gray-900 disabled:opacity-50"}),k&&e.jsx("p",{className:"text-sm text-blue-600 mt-1",children:"Fazendo upload..."})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm text-gray-600 mb-1",children:"Ou informe a URL do banner:"}),e.jsx("input",{type:"text",...j("bannerUrl"),placeholder:"URL do banner/thumbnail (ex: https://exemplo.com/banner.jpg ou /uploads/banners/banner.jpg)",className:"w-full px-4 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-[#FF6600] focus:border-transparent text-gray-900",onChange:t=>{const s=t.target.value.trim();m("bannerUrl",s,{shouldValidate:!1}),c(s||null)}})]}),h&&e.jsxs("div",{className:"mt-3",children:[e.jsx("p",{className:"text-sm text-gray-600 mb-2",children:"Preview do banner:"}),e.jsx("div",{className:"relative w-full h-48 border border-gray-300 rounded-md overflow-hidden",children:e.jsx("img",{src:Z(h),alt:"Preview do banner",className:"w-full h-full object-cover",onError:()=>c(null)})}),e.jsx("button",{type:"button",onClick:()=>{m("bannerUrl",""),c(null)},className:"mt-2 text-sm text-red-600 hover:text-red-800",children:"Remover banner"})]})]}),p.bannerUrl&&e.jsx("p",{className:"text-red-500 text-sm mt-1",children:p.bannerUrl.message})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Duração (opcional)"}),e.jsx("input",{...j("duration"),placeholder:"Ex: 25:30",className:"w-full px-4 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-[#FF6600] focus:border-transparent text-gray-900"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Ordem *"}),e.jsx("input",{type:"number",...j("order",{valueAsNumber:!0}),className:"w-full px-4 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-[#FF6600] focus:border-transparent text-gray-900"}),p.order&&e.jsx("p",{className:"text-red-500 text-sm mt-1",children:p.order.message})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Descrição (opcional)"}),e.jsx("textarea",{...j("description"),rows:3,className:"w-full px-4 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-[#FF6600] focus:border-transparent text-gray-900"})]}),ee&&e.jsx("div",{className:"bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded",children:ee}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{type:"submit",disabled:X,className:"flex-1 bg-[#FF6600] text-white py-2 px-4 rounded-md font-semibold hover:bg-[#e55a00] transition-colors disabled:opacity-50",children:X?w?"Salvando...":"Adicionando...":w?"Salvar Aula":"Adicionar Aula"}),e.jsx("button",{type:"button",onClick:de,className:"px-4 py-2 border border-gray-300 rounded-md text-gray-700 hover:bg-gray-50 transition-colors",children:"Cancelar"})]})]}),e.jsxs("div",{className:"space-y-2",children:[B.map((t,s)=>e.jsxs("div",{className:"flex items-center justify-between p-4 border border-gray-200 rounded-lg hover:bg-gray-50",children:[e.jsxs("div",{className:"flex items-center space-x-4 flex-1",children:[e.jsx("span",{className:"w-8 h-8 rounded-full bg-[#FF6600] text-white flex items-center justify-center font-bold",children:s+1}),e.jsx("div",{className:"flex-1",children:e.jsxs("div",{className:"flex items-start gap-3",children:[t.bannerUrl&&e.jsx("div",{className:"relative w-24 h-16 flex-shrink-0 rounded overflow-hidden border border-gray-200",children:e.jsx("img",{src:Z(t.bannerUrl),alt:t.title,className:"w-full h-full object-cover"})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("h3",{className:"font-semibold text-[#003366]",children:t.title}),t.duration&&e.jsxs("p",{className:"text-sm text-gray-500",children:["Duração: ",t.duration]}),t.videoUrl&&e.jsx("p",{className:"text-xs text-gray-400 mt-1 truncate max-w-md",children:t.videoUrl})]})]})})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsxs("div",{className:"text-sm text-gray-500",children:[t._count?.comments||0," comentários"]}),e.jsx("button",{onClick:()=>Le(t.id),className:"text-blue-600 hover:text-blue-800 font-medium text-sm",children:"Editar"}),e.jsx("button",{onClick:()=>Ae(t.id),className:"text-red-600 hover:text-red-800 font-medium text-sm",children:"Excluir"})]})]},t.id)),B.length===0&&e.jsx("p",{className:"text-center text-gray-500 py-24",children:'Nenhuma aula adicionada ainda. Clique em "Adicionar Aula" para começar.'})]})]})]}),e.jsx(Ie,{})]})}export{He as default};
