import{j as e}from"./index-CswzOF3x.js";import{u as b,h as y,d as s,L as g}from"./react-vendor-40RSlyA9.js";import{a as j}from"./api-cc_Vofyw.js";import"./ui-vendor-VWVTWWFz.js";function S(){const a=b(),[o]=y(),[l,x]=s.useState(""),[i,f]=s.useState(""),[d,n]=s.useState(""),[c,u]=s.useState(!1);s.useEffect(()=>{o.get("error")==="google_auth_failed"&&n("Erro ao fazer login com Google. Tente novamente.")},[o]);const m=o.get("returnUrl"),h=async r=>{r.preventDefault(),n(""),u(!0);try{const t=await j("/auth/login",{method:"POST",body:JSON.stringify({email:l,password:i})});typeof window<"u"&&(localStorage.setItem("token",t.accessToken),localStorage.setItem("user",JSON.stringify(t.user))),m?a(m):t.user?.role==="ADMIN"?a("/admin/dashboard"):a("/my-courses")}catch(t){const p=t?.message||"Erro ao fazer login. Verifique suas credenciais.";n(p),console.error("Login error:",t)}finally{u(!1)}};return e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-[#003366] to-[#FF6600] flex items-center justify-center py-12 px-4",children:e.jsxs("div",{className:"max-w-md w-full bg-white rounded-lg shadow-lg p-8 relative",children:[e.jsx(g,{to:"/",className:"absolute top-4 left-4 flex items-center justify-center w-10 h-10 rounded-full bg-gray-100 hover:bg-gray-200 transition-colors text-gray-700 hover:text-[#003366]",title:"Voltar para a página inicial",children:e.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 19l-7-7 7-7"})})}),e.jsx("h1",{className:"text-3xl font-bold text-center mb-8 text-[#003366]",children:"Entrar"}),d&&e.jsx("div",{className:"bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded mb-4",children:d}),e.jsxs("form",{onSubmit:h,className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"E-mail"}),e.jsx("input",{type:"email",value:l,onChange:r=>x(r.target.value),required:!0,className:"w-full px-4 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-[#FF6600] focus:border-transparent text-gray-900"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Senha"}),e.jsx("input",{type:"password",value:i,onChange:r=>f(r.target.value),required:!0,className:"w-full px-4 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-[#FF6600] focus:border-transparent text-gray-900"})]}),e.jsx("button",{type:"submit",disabled:c,className:"w-full bg-[#FF6600] text-white py-3 px-6 rounded-md font-semibold hover:bg-[#e55a00] transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:c?"Entrando...":"Entrar"})]}),e.jsxs("p",{className:"mt-6 text-center text-gray-600",children:["Não tem uma conta?"," ",e.jsx(g,{to:"/register",className:"text-[#FF6600] hover:underline",children:"Cadastre-se"})]})]})})}export{S as default};
