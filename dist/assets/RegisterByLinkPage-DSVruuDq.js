import{j as e,L as j}from"./index-DmKq1tdC.js";import{d as i,i as v}from"./react-vendor-40RSlyA9.js";import{u as N,o as F,n as u,s as a,e as w}from"./form-vendor-UKDbifrO.js";import{t as T}from"./zod-Bd6eNPbn.js";import{a as g}from"./api-WS8dxZuR.js";import{F as k}from"./Footer-hRPW9HVk.js";import"./ui-vendor-CXsW6q1o.js";const S=F({name:a().min(1,"Nome é obrigatório"),cpf:a().min(11,"CPF inválido").max(11,"CPF inválido"),phone:a().min(10,"Telefone inválido"),email:a().email("Email inválido"),cep:a().min(8,"CEP inválido").max(8,"CEP inválido"),locality:a().min(1,"Localidade é obrigatória"),city:a().min(1,"Cidade é obrigatória"),state:a().min(2,"Estado é obrigatório").max(2,"Estado inválido"),participantType:w(["PRODUTOR","OUTROS"]),otherType:a().optional(),pondCount:u().optional(),waterDepth:u().optional()}).refine(o=>o.participantType==="PRODUTOR"?o.pondCount!==void 0&&o.waterDepth!==void 0:!0,{message:"Campos de produtor são obrigatórios",path:["pondCount"]});function C({eventId:o}){const[n,s]=i.useState(!1),[c,m]=i.useState(!1),[d,l]=i.useState(null),{register:t,handleSubmit:b,watch:f,formState:{errors:r}}=N({resolver:T(S)}),x=f("participantType"),h=async y=>{s(!0),l(null);try{await g("/registrations",{method:"POST",body:JSON.stringify({...y,eventId:o})}),m(!0)}catch(p){l(p instanceof Error?p.message:"Erro ao processar cadastro")}finally{s(!1)}};return c?e.jsxs("div",{className:"text-center py-8",children:[e.jsx("div",{className:"text-green-600 text-2xl font-bold mb-4",children:"✓ Cadastro realizado com sucesso!"}),e.jsx("p",{className:"text-gray-600",children:"Você receberá um email de confirmação em breve."})]}):e.jsxs("form",{onSubmit:b(h),className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Nome Completo *"}),e.jsx("input",{...t("name"),className:"w-full px-4 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-[#FF6600] focus:border-transparent text-gray-900"}),r.name&&e.jsx("p",{className:"text-red-500 text-sm mt-1",children:r.name.message})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"CPF *"}),e.jsx("input",{...t("cpf"),maxLength:11,className:"w-full px-4 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-[#FF6600] focus:border-transparent text-gray-900"}),r.cpf&&e.jsx("p",{className:"text-red-500 text-sm mt-1",children:r.cpf.message})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Telefone *"}),e.jsx("input",{...t("phone"),className:"w-full px-4 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-[#FF6600] focus:border-transparent text-gray-900"}),r.phone&&e.jsx("p",{className:"text-red-500 text-sm mt-1",children:r.phone.message})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"E-mail *"}),e.jsx("input",{type:"email",...t("email"),className:"w-full px-4 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-[#FF6600] focus:border-transparent text-gray-900"}),r.email&&e.jsx("p",{className:"text-red-500 text-sm mt-1",children:r.email.message})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"CEP *"}),e.jsx("input",{...t("cep"),maxLength:8,className:"w-full px-4 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-[#FF6600] focus:border-transparent text-gray-900"}),r.cep&&e.jsx("p",{className:"text-red-500 text-sm mt-1",children:r.cep.message})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Localidade/Bairro *"}),e.jsx("input",{...t("locality"),className:"w-full px-4 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-[#FF6600] focus:border-transparent text-gray-900"}),r.locality&&e.jsx("p",{className:"text-red-500 text-sm mt-1",children:r.locality.message})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Cidade *"}),e.jsx("input",{...t("city"),className:"w-full px-4 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-[#FF6600] focus:border-transparent text-gray-900"}),r.city&&e.jsx("p",{className:"text-red-500 text-sm mt-1",children:r.city.message})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Estado *"}),e.jsx("input",{...t("state"),maxLength:2,placeholder:"CE",className:"w-full px-4 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-[#FF6600] focus:border-transparent text-gray-900"}),r.state&&e.jsx("p",{className:"text-red-500 text-sm mt-1",children:r.state.message})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2 md:text-base",children:"Selecione a opção que melhor descreve você *"}),e.jsxs("select",{...t("participantType"),className:"w-full px-4 py-3 text-base border border-gray-300 rounded-md focus:ring-2 focus:ring-[#FF6600] focus:border-transparent text-gray-900 md:py-2 md:text-sm appearance-none bg-white cursor-pointer min-h-[48px] touch-manipulation",style:{backgroundImage:`url("data:image/svg+xml,%3csvg xmlns='http://www.w3.org/2000/svg' fill='none' viewBox='0 0 20 20'%3e%3cpath stroke='%236b7280' stroke-linecap='round' stroke-linejoin='round' stroke-width='1.5' d='M6 8l4 4 4-4'/%3e%3c/svg%3e")`,backgroundPosition:"right 0.75rem center",backgroundRepeat:"no-repeat",backgroundSize:"1.5em 1.5em",paddingRight:"2.5rem"},children:[e.jsx("option",{value:"",children:"Selecione..."}),e.jsx("option",{value:"PRODUTOR",children:"Produtor"}),e.jsx("option",{value:"OUTROS",children:"Outros"})]}),r.participantType&&e.jsx("p",{className:"text-red-500 text-sm mt-1",children:r.participantType.message})]}),x==="PRODUTOR"&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Quantidade de Viveiros *"}),e.jsx("input",{type:"number",...t("pondCount",{valueAsNumber:!0}),className:"w-full px-4 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-[#FF6600] focus:border-transparent text-gray-900"}),r.pondCount&&e.jsx("p",{className:"text-red-500 text-sm mt-1",children:r.pondCount.message})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Lâmina d'água (metros) *"}),e.jsx("input",{type:"number",step:"0.01",...t("waterDepth",{valueAsNumber:!0}),className:"w-full px-4 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-[#FF6600] focus:border-transparent text-gray-900"}),r.waterDepth&&e.jsx("p",{className:"text-red-500 text-sm mt-1",children:r.waterDepth.message})]})]}),x==="OUTROS"&&e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"O que você é? *"}),e.jsx("input",{...t("otherType"),className:"w-full px-4 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-[#FF6600] focus:border-transparent text-gray-900"}),r.otherType&&e.jsx("p",{className:"text-red-500 text-sm mt-1",children:r.otherType.message})]}),d&&e.jsx("div",{className:"bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded",children:d}),e.jsx("button",{type:"submit",disabled:n,className:"w-full bg-[#FF6600] text-white py-3 px-6 rounded-md font-semibold hover:bg-[#e55a00] transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:n?"Enviando...":"Confirmar Cadastro"})]})}function I(){const n=v().linkId,[s,c]=i.useState(null),[m,d]=i.useState(!0);return i.useEffect(()=>{async function l(){try{const t=await g(`/events/link/${n}`);c(t)}catch{}finally{d(!1)}}n&&l()},[n]),m?e.jsx(j,{}):s?e.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-[#003366] to-[#FF6600]",children:[s.bannerUrl&&e.jsx("div",{className:"w-full h-64 md:h-96 bg-cover bg-center",style:{backgroundImage:`url(${s.bannerUrl})`}}),e.jsx("div",{className:"container mx-auto px-4 py-8",children:e.jsxs("div",{className:"max-w-2xl mx-auto bg-white rounded-lg shadow-lg p-8",children:[e.jsx("h1",{className:"text-3xl font-bold mb-4 text-[#003366]",children:s.title}),e.jsx("p",{className:"text-gray-600 mb-8",children:s.description}),e.jsx(C,{eventId:s.id})]})}),e.jsx(k,{})]}):e.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gradient-to-br from-[#003366] to-[#FF6600]",children:e.jsx("div",{className:"text-white text-xl",children:"Evento não encontrado"})})}export{I as default};
