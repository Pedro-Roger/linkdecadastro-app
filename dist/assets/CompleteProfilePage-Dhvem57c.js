import{j as e}from"./index-DHiB8Icf.js";import{u as h,d as l,L as x}from"./react-vendor-40RSlyA9.js";import{u as g,o as b,s as n}from"./form-vendor-UKDbifrO.js";import{t as y}from"./zod-Bd6eNPbn.js";import{a as j}from"./api-cc_Vofyw.js";import"./ui-vendor-VWVTWWFz.js";const N=b({fullName:n().min(3,"Nome completo deve ter pelo menos 3 caracteres"),phone:n().min(10,"Telefone inválido").regex(/^[\d\s()+-]+$/,"Telefone inválido"),cpf:n().min(11,"CPF inválido").regex(/^\d{11}$/,"CPF deve conter apenas números")});function P(){const a=h(),[i,c]=l.useState(!1),[d,m]=l.useState(null),{register:o,handleSubmit:p,formState:{errors:r}}=g({resolver:y(N)});l.useEffect(()=>{if(!(typeof window<"u"?localStorage.getItem("token"):null)){a("/login");return}},[a]);const u=async t=>{c(!0),m(null);try{const s=t.cpf.replace(/\D/g,"");if(s.length!==11)throw new Error("CPF deve conter 11 dígitos");const f=t.phone.replace(/\D/g,"");await j("/user/complete-profile",{method:"POST",auth:!0,body:JSON.stringify({fullName:t.fullName.trim(),phone:f,cpf:s})}),a("/my-courses")}catch(s){m(s instanceof Error?s.message:"Erro ao completar cadastro")}finally{c(!1)}};return e.jsxs("div",{className:"min-h-screen bg-gray-50 flex flex-col",children:[e.jsx("header",{className:"bg-white shadow-sm",children:e.jsx("div",{className:"container mx-auto px-4 py-4",children:e.jsx(x,{to:"/",className:"flex items-center",children:e.jsx("img",{src:"/logo B.png",alt:"Link de Cadastro",className:"h-16 md:h-20 w-auto object-contain"})})})}),e.jsx("div",{className:"container mx-auto px-4 py-8 flex-1 flex items-center justify-center",children:e.jsx("div",{className:"max-w-md w-full",children:e.jsxs("div",{className:"bg-white rounded-lg shadow-md p-8",children:[e.jsxs("div",{className:"text-center mb-6 relative",children:[e.jsx(x,{to:"/",className:"absolute top-0 left-0 flex items-center justify-center w-10 h-10 rounded-full bg-gray-100 hover:bg-gray-200 transition-colors text-gray-700 hover:text-[#003366]",title:"Voltar para a página inicial",children:e.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 19l-7-7 7-7"})})}),e.jsx("h1",{className:"text-2xl font-bold text-[#003366] mb-2",children:"Complete seu Cadastro"}),e.jsx("p",{className:"text-gray-600 text-sm",children:"Preencha os dados abaixo para finalizar seu cadastro"})]}),e.jsxs("form",{onSubmit:p(u),className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Nome Completo *"}),e.jsx("input",{...o("fullName"),type:"text",className:"w-full px-4 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-[#FF6600] focus:border-transparent text-gray-900",placeholder:"Seu nome completo"}),r.fullName&&e.jsx("p",{className:"text-red-500 text-sm mt-1",children:r.fullName.message})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Telefone/WhatsApp *"}),e.jsx("input",{...o("phone"),type:"tel",className:"w-full px-4 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-[#FF6600] focus:border-transparent text-gray-900",placeholder:"(00) 00000-0000"}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Formato: (00) 00000-0000 ou 00000000000"}),r.phone&&e.jsx("p",{className:"text-red-500 text-sm mt-1",children:r.phone.message})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"CPF *"}),e.jsx("input",{...o("cpf"),type:"text",maxLength:11,className:"w-full px-4 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-[#FF6600] focus:border-transparent text-gray-900",placeholder:"00000000000",onChange:t=>{const s=t.target.value.replace(/\D/g,"");t.target.value=s}}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Apenas números (11 dígitos)"}),r.cpf&&e.jsx("p",{className:"text-red-500 text-sm mt-1",children:r.cpf.message})]}),d&&e.jsx("div",{className:"bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded",children:d}),e.jsx("button",{type:"submit",disabled:i,className:"w-full bg-[#FF6600] text-white py-3 px-4 rounded-md font-semibold hover:bg-[#e55a00] transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:i?"Salvando...":"Finalizar Cadastro"})]})]})})})]})}export{P as default};
