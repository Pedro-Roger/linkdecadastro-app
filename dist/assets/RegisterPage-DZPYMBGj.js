import{j as e}from"./index-Db6jo_5u.js";import{u as A,d as l,L as C}from"./react-vendor-40RSlyA9.js";import{u as D,o as M,s as n,e as U}from"./form-vendor-UKDbifrO.js";import{t as G}from"./zod-Bd6eNPbn.js";import{F as B}from"./Footer-C718gNe_.js";import{M as L}from"./MobileNavbar-B2yQ7QiF.js";import{a as I}from"./api-cc_Vofyw.js";import"./ui-vendor-VWVTWWFz.js";import"./NotificationBell-CNOtkmWq.js";import"./utils-vendor-DwAQI6Fw.js";const J=M({name:n().min(1,"Nome é obrigatório"),email:n().email("Email inválido"),password:n().min(6,"Senha deve ter no mínimo 6 caracteres"),cpf:n().min(11,"CPF deve ter 11 dígitos").max(11,"CPF deve ter 11 dígitos").regex(/^\d+$/,"CPF deve conter apenas números"),birthDate:n().min(1,"Data de nascimento é obrigatória"),participantType:U(["ESTUDANTE","PROFESSOR","PESQUISADOR","PRODUTOR"],{required_error:"Selecione o tipo de participante"}),schoolOrUniversity:n().optional(),hectares:n().optional().transform(s=>{if(!s||s.trim()==="")return;const i=parseFloat(s);return isNaN(i)?void 0:i}).refine(s=>s===void 0||s>0,{message:"Hectares deve ser um número positivo"}),waterArea:n().optional().transform(s=>{if(!s||s.trim()==="")return;const i=parseFloat(s);return isNaN(i)?void 0:i}).refine(s=>s===void 0||s>0,{message:"Hectares de lâmina d'água deve ser um número positivo"}),ponds:n().optional().transform(s=>{if(!s||s.trim()==="")return;const i=parseInt(s);return isNaN(i)?void 0:i}).refine(s=>s===void 0||s>0,{message:"Quantidade de viveiros deve ser um número positivo"}),state:n().min(2,"Estado é obrigatório"),city:n().min(1,"Cidade é obrigatória")}).refine(s=>s.participantType==="PROFESSOR"?s.schoolOrUniversity!==void 0&&s.schoolOrUniversity.trim().length>0:!0,{message:"Escola ou universidade é obrigatória para professores",path:["schoolOrUniversity"]}).refine(s=>s.participantType==="PRODUTOR"?s.hectares!==void 0&&s.hectares>0:!0,{message:"Hectares é obrigatório para produtores",path:["hectares"]}).refine(s=>s.participantType==="PRODUTOR"?s.waterArea!==void 0&&s.waterArea>0:!0,{message:"Hectares de lâmina d'água é obrigatório para produtores",path:["waterArea"]}).refine(s=>s.participantType==="PRODUTOR"?s.ponds!==void 0&&s.ponds>0:!0,{message:"Quantidade de viveiros é obrigatória para produtores",path:["ponds"]});function Y(){const s=A(),[i,g]=l.useState(""),[u,x]=l.useState(!1),[S,c]=l.useState([]),[N,m]=l.useState([]),[w,h]=l.useState(!1),[b,f]=l.useState(!1),{register:o,handleSubmit:R,watch:y,setValue:p,formState:{errors:a}}=D({resolver:G(J)}),d=y("state"),v=y("participantType");l.useEffect(()=>{P()},[]),l.useEffect(()=>{d&&d.length===2?F(d):(m([]),p("city",""))},[d,p]);const P=async()=>{try{h(!0);const r=await fetch("https://servicodados.ibge.gov.br/api/v1/localidades/estados?orderBy=nome");if(r.ok){const t=await r.json();c(t)}else c([{sigla:"AC",nome:"Acre"},{sigla:"AL",nome:"Alagoas"},{sigla:"AP",nome:"Amapá"},{sigla:"AM",nome:"Amazonas"},{sigla:"BA",nome:"Bahia"},{sigla:"CE",nome:"Ceará"},{sigla:"DF",nome:"Distrito Federal"},{sigla:"ES",nome:"Espírito Santo"},{sigla:"GO",nome:"Goiás"},{sigla:"MA",nome:"Maranhão"},{sigla:"MT",nome:"Mato Grosso"},{sigla:"MS",nome:"Mato Grosso do Sul"},{sigla:"MG",nome:"Minas Gerais"},{sigla:"PA",nome:"Pará"},{sigla:"PB",nome:"Paraíba"},{sigla:"PR",nome:"Paraná"},{sigla:"PE",nome:"Pernambuco"},{sigla:"PI",nome:"Piauí"},{sigla:"RJ",nome:"Rio de Janeiro"},{sigla:"RN",nome:"Rio Grande do Norte"},{sigla:"RS",nome:"Rio Grande do Sul"},{sigla:"RO",nome:"Rondônia"},{sigla:"RR",nome:"Roraima"},{sigla:"SC",nome:"Santa Catarina"},{sigla:"SP",nome:"São Paulo"},{sigla:"SE",nome:"Sergipe"},{sigla:"TO",nome:"Tocantins"}])}catch{c([{sigla:"AC",nome:"Acre"},{sigla:"AL",nome:"Alagoas"},{sigla:"AP",nome:"Amapá"},{sigla:"AM",nome:"Amazonas"},{sigla:"BA",nome:"Bahia"},{sigla:"CE",nome:"Ceará"},{sigla:"DF",nome:"Distrito Federal"},{sigla:"ES",nome:"Espírito Santo"},{sigla:"GO",nome:"Goiás"},{sigla:"MA",nome:"Maranhão"},{sigla:"MT",nome:"Mato Grosso"},{sigla:"MS",nome:"Mato Grosso do Sul"},{sigla:"MG",nome:"Minas Gerais"},{sigla:"PA",nome:"Pará"},{sigla:"PB",nome:"Paraíba"},{sigla:"PR",nome:"Paraná"},{sigla:"PE",nome:"Pernambuco"},{sigla:"PI",nome:"Piauí"},{sigla:"RJ",nome:"Rio de Janeiro"},{sigla:"RN",nome:"Rio Grande do Norte"},{sigla:"RS",nome:"Rio Grande do Sul"},{sigla:"RO",nome:"Rondônia"},{sigla:"RR",nome:"Roraima"},{sigla:"SC",nome:"Santa Catarina"},{sigla:"SP",nome:"São Paulo"},{sigla:"SE",nome:"Sergipe"},{sigla:"TO",nome:"Tocantins"}])}finally{h(!1)}},F=async r=>{try{f(!0);const t=await fetch(`https://servicodados.ibge.gov.br/api/v1/localidades/estados/${r}/municipios`);if(t.ok){const E=(await t.json()).sort((T,k)=>T.nome.localeCompare(k.nome));m(E)}else m([])}catch{m([])}finally{f(!1)}},O=async r=>{g(""),x(!0);try{await I("/auth/register",{method:"POST",body:JSON.stringify({name:r.name,email:r.email,password:r.password,cpf:r.cpf.replace(/\D/g,""),birthDate:r.birthDate,participantType:r.participantType,schoolOrUniversity:r.participantType==="PROFESSOR"?r.schoolOrUniversity:void 0,hectares:r.participantType==="PRODUTOR"?r.hectares:void 0,waterArea:r.participantType==="PRODUTOR"?r.waterArea:void 0,ponds:r.participantType==="PRODUTOR"?r.ponds:void 0,state:r.state,city:r.city})}),s("/login?registered=true")}catch(t){g(t instanceof Error?t.message:"Erro ao cadastrar")}finally{x(!1)}};return e.jsxs("div",{className:"min-h-screen bg-gray-50 flex flex-col",children:[e.jsx(L,{}),e.jsx("div",{className:"flex-1 flex items-center justify-center py-12 px-4",children:e.jsxs("div",{className:"max-w-2xl w-full bg-white rounded-lg shadow-lg p-8",children:[e.jsx("h1",{className:"text-3xl font-bold text-center mb-8 text-[#003366]",children:"Cadastrar"}),i&&e.jsx("div",{className:"bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded mb-4",children:i}),e.jsxs("form",{onSubmit:R(O),className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Nome Completo *"}),e.jsx("input",{...o("name"),type:"text",className:"w-full px-4 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-[#FF6600] focus:border-transparent text-gray-900"}),a.name&&e.jsx("p",{className:"text-red-500 text-sm mt-1",children:a.name.message})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"E-mail *"}),e.jsx("input",{...o("email"),type:"email",className:"w-full px-4 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-[#FF6600] focus:border-transparent text-gray-900"}),a.email&&e.jsx("p",{className:"text-red-500 text-sm mt-1",children:a.email.message})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Senha *"}),e.jsx("input",{...o("password"),type:"password",minLength:6,className:"w-full px-4 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-[#FF6600] focus:border-transparent text-gray-900"}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Mínimo de 6 caracteres"}),a.password&&e.jsx("p",{className:"text-red-500 text-sm mt-1",children:a.password.message})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"CPF *"}),e.jsx("input",{...o("cpf"),type:"text",maxLength:14,placeholder:"000.000.000-00",className:"w-full px-4 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-[#FF6600] focus:border-transparent text-gray-900",onChange:r=>{const t=r.target.value.replace(/\D/g,""),j=t.replace(/(\d{3})(\d{3})(\d{3})(\d{2})/,"$1.$2.$3-$4");r.target.value=j,p("cpf",t,{shouldValidate:!0})}}),a.cpf&&e.jsx("p",{className:"text-red-500 text-sm mt-1",children:a.cpf.message})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Data de Nascimento *"}),e.jsx("input",{...o("birthDate"),type:"date",max:new Date().toISOString().split("T")[0],className:"w-full px-4 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-[#FF6600] focus:border-transparent text-gray-900"}),a.birthDate&&e.jsx("p",{className:"text-red-500 text-sm mt-1",children:a.birthDate.message})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2 md:text-base",children:"Você é: *"}),e.jsxs("select",{...o("participantType"),className:"w-full px-4 py-3 text-base border border-gray-300 rounded-md focus:ring-2 focus:ring-[#FF6600] focus:border-transparent text-gray-900 md:py-2 md:text-sm appearance-none bg-white cursor-pointer min-h-[48px] touch-manipulation",style:{backgroundImage:`url("data:image/svg+xml,%3csvg xmlns='http://www.w3.org/2000/svg' fill='none' viewBox='0 0 20 20'%3e%3cpath stroke='%236b7280' stroke-linecap='round' stroke-linejoin='round' stroke-width='1.5' d='M6 8l4 4 4-4'/%3e%3c/svg%3e")`,backgroundPosition:"right 0.75rem center",backgroundRepeat:"no-repeat",backgroundSize:"1.5em 1.5em",paddingRight:"2.5rem"},children:[e.jsx("option",{value:"",children:"Selecione..."}),e.jsx("option",{value:"ESTUDANTE",children:"Estudante"}),e.jsx("option",{value:"PROFESSOR",children:"Professor"}),e.jsx("option",{value:"PESQUISADOR",children:"Pesquisador"}),e.jsx("option",{value:"PRODUTOR",children:"Produtor"})]}),a.participantType&&e.jsx("p",{className:"text-red-500 text-sm mt-1",children:a.participantType.message})]}),v==="PROFESSOR"&&e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Escola ou Universidade *"}),e.jsx("input",{...o("schoolOrUniversity"),type:"text",placeholder:"Ex: Universidade Federal de Alagoas",className:"w-full px-4 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-[#FF6600] focus:border-transparent text-gray-900"}),a.schoolOrUniversity&&e.jsx("p",{className:"text-red-500 text-sm mt-1",children:a.schoolOrUniversity.message})]}),v==="PRODUTOR"&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Quantidade de Viveiros *"}),e.jsx("input",{...o("ponds"),type:"number",step:"1",min:"1",placeholder:"Ex: 5",className:"w-full px-4 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-[#FF6600] focus:border-transparent text-gray-900"}),a.ponds&&e.jsx("p",{className:"text-red-500 text-sm mt-1",children:a.ponds.message})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Hectares de Lâmina d'Água *"}),e.jsx("input",{...o("waterArea"),type:"number",step:"0.01",min:"0",placeholder:"Ex: 10.5",className:"w-full px-4 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-[#FF6600] focus:border-transparent text-gray-900"}),a.waterArea&&e.jsx("p",{className:"text-red-500 text-sm mt-1",children:a.waterArea.message})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Quantos hectares você possui? *"}),e.jsx("input",{...o("hectares"),type:"number",step:"0.01",min:"0",placeholder:"Ex: 10.5",className:"w-full px-4 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-[#FF6600] focus:border-transparent text-gray-900"}),a.hectares&&e.jsx("p",{className:"text-red-500 text-sm mt-1",children:a.hectares.message})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2 md:text-base",children:"Estado *"}),e.jsxs("select",{...o("state"),disabled:w,className:"w-full px-4 py-3 text-base border border-gray-300 rounded-md focus:ring-2 focus:ring-[#FF6600] focus:border-transparent text-gray-900 disabled:opacity-50 md:py-2 md:text-sm appearance-none bg-white cursor-pointer min-h-[48px] touch-manipulation",style:{backgroundImage:`url("data:image/svg+xml,%3csvg xmlns='http://www.w3.org/2000/svg' fill='none' viewBox='0 0 20 20'%3e%3cpath stroke='%236b7280' stroke-linecap='round' stroke-linejoin='round' stroke-width='1.5' d='M6 8l4 4 4-4'/%3e%3c/svg%3e")`,backgroundPosition:"right 0.75rem center",backgroundRepeat:"no-repeat",backgroundSize:"1.5em 1.5em",paddingRight:"2.5rem"},children:[e.jsx("option",{value:"",children:"Selecione o estado..."}),S.map(r=>e.jsx("option",{value:r.sigla,children:r.nome},r.sigla))]}),a.state&&e.jsx("p",{className:"text-red-500 text-sm mt-1",children:a.state.message})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2 md:text-base",children:"Cidade *"}),e.jsxs("select",{...o("city"),disabled:!d||b,className:"w-full px-4 py-3 text-base border border-gray-300 rounded-md focus:ring-2 focus:ring-[#FF6600] focus:border-transparent text-gray-900 disabled:opacity-50 md:py-2 md:text-sm appearance-none bg-white cursor-pointer min-h-[48px] touch-manipulation",style:{backgroundImage:`url("data:image/svg+xml,%3csvg xmlns='http://www.w3.org/2000/svg' fill='none' viewBox='0 0 20 20'%3e%3cpath stroke='%236b7280' stroke-linecap='round' stroke-linejoin='round' stroke-width='1.5' d='M6 8l4 4 4-4'/%3e%3c/svg%3e")`,backgroundPosition:"right 0.75rem center",backgroundRepeat:"no-repeat",backgroundSize:"1.5em 1.5em",paddingRight:"2.5rem"},children:[e.jsx("option",{value:"",children:b?"Carregando...":d?"Selecione a cidade...":"Selecione o estado primeiro"}),N.map((r,t)=>e.jsx("option",{value:r.nome,children:r.nome},t))]}),a.city&&e.jsx("p",{className:"text-red-500 text-sm mt-1",children:a.city.message})]})]}),e.jsx("button",{type:"submit",disabled:u,className:"w-full bg-[#FF6600] text-white py-3 px-6 rounded-md font-semibold hover:bg-[#e55a00] transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:u?"Cadastrando...":"Cadastrar"})]}),e.jsxs("p",{className:"mt-6 text-center text-gray-600",children:["Já tem uma conta?"," ",e.jsx(C,{to:"/login",className:"text-[#FF6600] hover:underline",children:"Entrar"})]})]})}),e.jsx(B,{})]})}export{Y as default};
