import{u as ae,j as e,L as ie}from"./index-CsxD5A8A.js";import{u as oe,h as ne,d as c,L as h}from"./react-vendor-40RSlyA9.js";import{u as le,o as de,s as m,b as I,e as W,l as J}from"./form-vendor-UKDbifrO.js";import{t as ce}from"./zod-Bd6eNPbn.js";import{N as me}from"./NotificationBell-ZfODFpwn.js";import{F as ue}from"./Footer-Cs2AOzBe.js";import{n as xe,g as ge,a as P}from"./api-cc_Vofyw.js";import"./ui-vendor-VWVTWWFz.js";import"./utils-vendor-DwAQI6Fw.js";const pe=de({title:m().min(1,"Título é obrigatório"),description:m().optional(),bannerUrl:m().optional().or(J("")).transform(r=>r&&r.trim()?r.trim():void 0).refine(r=>!r||r.startsWith("/")||r.startsWith("http://")||r.startsWith("https://"),{message:"URL inválida"}),status:W(["ACTIVE","INACTIVE"]).default("ACTIVE"),type:W(["PRESENCIAL","ONLINE"]).default("ONLINE"),maxEnrollments:m().optional().transform(r=>{if(!r||!r.trim())return null;const x=parseInt(r,10);return Number.isNaN(x)?null:x}),waitlistEnabled:I().optional(),waitlistLimit:m().optional().transform(r=>{if(!r||!r.trim())return 0;const x=parseInt(r,10);return Number.isNaN(x)?0:x}),regionRestrictionEnabled:I().optional(),allowAllRegions:I().optional(),defaultRegionLimit:m().optional().transform(r=>{if(!r||!r.trim())return null;const x=parseInt(r,10);return Number.isNaN(x)?null:x}),startDate:m().optional(),endDate:m().optional(),slug:m().optional().transform(r=>{if(!(!r||typeof r!="string"||!r.trim()))return r.trim().toLowerCase()}).refine(r=>!r||/^[a-z0-9-]+$/.test(r),{message:"URL personalizada deve conter apenas letras minúsculas, números e hífens"}),firstLessonTitle:m().optional(),firstLessonVideoUrl:m().optional().or(J("")).refine(r=>!r||r.trim()===""||r.startsWith("http://")||r.startsWith("https://"),{message:"URL do YouTube inválida"}),firstLessonDescription:m().optional()}),fe=[{sigla:"AC",nome:"Acre"},{sigla:"AL",nome:"Alagoas"},{sigla:"AP",nome:"Amapá"},{sigla:"AM",nome:"Amazonas"},{sigla:"BA",nome:"Bahia"},{sigla:"CE",nome:"Ceará"},{sigla:"DF",nome:"Distrito Federal"},{sigla:"ES",nome:"Espírito Santo"},{sigla:"GO",nome:"Goiás"},{sigla:"MA",nome:"Maranhão"},{sigla:"MT",nome:"Mato Grosso"},{sigla:"MS",nome:"Mato Grosso do Sul"},{sigla:"MG",nome:"Minas Gerais"},{sigla:"PA",nome:"Pará"},{sigla:"PB",nome:"Paraíba"},{sigla:"PR",nome:"Paraná"},{sigla:"PE",nome:"Pernambuco"},{sigla:"PI",nome:"Piauí"},{sigla:"RJ",nome:"Rio de Janeiro"},{sigla:"RN",nome:"Rio Grande do Norte"},{sigla:"RS",nome:"Rio Grande do Sul"},{sigla:"RO",nome:"Rondônia"},{sigla:"RR",nome:"Roraima"},{sigla:"SC",nome:"Santa Catarina"},{sigla:"SP",nome:"São Paulo"},{sigla:"SE",nome:"Sergipe"},{sigla:"TO",nome:"Tocantins"}];function Fe(){const r=oe(),[x]=ne(),E=x.get("clone"),{user:F,loading:R,isAuthenticated:k,signOut:Y}=ae({requireAuth:!0,redirectTo:"/login"}),[V,C]=c.useState(!1),[z,g]=c.useState(null),[A,M]=c.useState(!1),[f,b]=c.useState(null),[y,U]=c.useState(!1),[_,O]=c.useState(!1),[B,G]=c.useState([]),[j,S]=c.useState([]),[u,N]=c.useState({state:"",city:"",limit:"",waitlistLimit:""}),[$,T]=c.useState(null),{register:n,handleSubmit:H,watch:w,setValue:i,formState:{errors:o}}=le({resolver:ce(pe),defaultValues:{status:"ACTIVE",type:"ONLINE",waitlistEnabled:!1,waitlistLimit:0,regionRestrictionEnabled:!1,allowAllRegions:!0}}),p=w("bannerUrl"),v=w("firstLessonVideoUrl"),Z=w("waitlistEnabled"),K=w("regionRestrictionEnabled");w("allowAllRegions");const X=()=>{if(!u.state||!u.limit.trim()){T("Selecione o estado e informe o limite de vagas.");return}const s=parseInt(u.limit,10);if(Number.isNaN(s)||s<=0){T("Informe um limite de vagas válido (maior que zero).");return}const t=u.waitlistLimit?parseInt(u.waitlistLimit,10):0;S(a=>[...a,{state:u.state,city:u.city.trim(),limit:s,waitlistLimit:Number.isNaN(t)||t<0?0:t}]),N({state:"",city:"",limit:"",waitlistLimit:""}),T(null)},q=s=>{S(t=>t.filter((a,d)=>d!==s))},Q=s=>{const t=[/(?:youtube\.com\/watch\?v=|youtu\.be\/|youtube\.com\/embed\/)([^&\n?#]+)/,/youtube\.com\/watch\?.*v=([^&\n?#]+)/];for(const a of t){const d=s.match(a);if(d&&d[1])return`https://img.youtube.com/vi/${d[1]}/maxresdefault.jpg`}return null};c.useEffect(()=>{if(v&&v.trim()&&y){const s=Q(v);s&&(!p||p===""||p===f)&&(i("bannerUrl",s,{shouldValidate:!1}),b(s))}},[v,y,i]);const ee=async s=>{M(!0),g(null);try{if(!s.type.startsWith("image/"))throw new Error("Apenas imagens são permitidas (JPG, PNG, GIF)");const t=5*1024*1024;if(s.size>t)throw new Error(`Arquivo muito grande (${(s.size/1024/1024).toFixed(2)}MB). Máximo: 5MB`);const a=new FormData;a.append("file",s);const d=`${ge()}/admin/upload`,l=typeof window<"u"?localStorage.getItem("token"):null,L=await fetch(d,{method:"POST",headers:l?{Authorization:`Bearer ${l}`}:void 0,body:a});if(!L.ok){const re=await L.json().catch(()=>({error:"Erro desconhecido"}));throw new Error(re.error||`Erro ao fazer upload (${L.status})`)}const D=await L.json();if(!D.url)throw new Error("URL não retornada pelo servidor");i("bannerUrl",D.url,{shouldValidate:!0}),b(D.url),g(null)}catch(t){const a=t instanceof Error?t.message:"Erro ao fazer upload";g(a)}finally{M(!1)}},se=async s=>{O(!0),g(null);try{const t=await P(`/admin/courses/${s}`,{auth:!0});if(!t)throw new Error("Curso não encontrado");if(i("title",`${t.title} (Cópia)`),t.description&&i("description",t.description),t.bannerUrl&&(i("bannerUrl",t.bannerUrl),b(t.bannerUrl)),i("status",t.status||"ACTIVE"),i("type",t.type||"ONLINE"),t.maxEnrollments&&i("maxEnrollments",String(t.maxEnrollments)),i("waitlistEnabled",t.waitlistEnabled||!1),t.waitlistLimit&&i("waitlistLimit",String(t.waitlistLimit)),i("regionRestrictionEnabled",t.regionRestrictionEnabled||!1),i("allowAllRegions",t.allowAllRegions??!0),t.defaultRegionLimit&&i("defaultRegionLimit",String(t.defaultRegionLimit)),i("slug",""),t.regionQuotas&&t.regionQuotas.length>0){const a=t.regionQuotas.map(d=>({state:d.state,city:d.city||"",limit:d.limit,waitlistLimit:d.waitlistLimit||0}));S(a)}if(t.lessons&&t.lessons.length>0?G(t.lessons.slice(1)):G([]),t.lessons&&t.lessons.length>0&&t.lessons[0]){const a=t.lessons[0];U(!0),a.title&&i("firstLessonTitle",a.title),a.description&&i("firstLessonDescription",a.description),a.videoUrl&&i("firstLessonVideoUrl",a.videoUrl),a.bannerUrl&&i("bannerUrl",a.bannerUrl),a.duration&&i("firstLessonDuration",a.duration)}else U(!1)}catch(t){console.error("Erro ao clonar curso:",t);const a=t?.message||"Erro ao carregar curso para clonagem. Verifique se você tem permissão.";g(a),alert(a)}finally{O(!1)}};c.useEffect(()=>{if(!R){if(!k||F?.role!=="ADMIN"){r("/my-courses");return}E&&se(E)}},[R,k,F,r,E]);const te=async s=>{C(!0),g(null);try{if(s.regionRestrictionEnabled&&j.length===0){g("Adicione pelo menos uma região com limite de vagas ou desative a restrição regional."),C(!1);return}const t=s.bannerUrl&&s.bannerUrl.trim()||f&&f.trim()||void 0,a={title:s.title,description:s.description||void 0,bannerUrl:t,status:s.status||"ACTIVE",type:s.type||"ONLINE",maxEnrollments:s.maxEnrollments&&typeof s.maxEnrollments=="number"?s.maxEnrollments:null,waitlistEnabled:s.waitlistEnabled??!1,waitlistLimit:typeof s.waitlistLimit=="number"&&s.waitlistLimit>=0?s.waitlistLimit:0,regionRestrictionEnabled:s.regionRestrictionEnabled??!1,allowAllRegions:s.regionRestrictionEnabled??!1?s.allowAllRegions??!0:!0,defaultRegionLimit:typeof s.defaultRegionLimit=="number"&&s.defaultRegionLimit>0?s.defaultRegionLimit:null,startDate:s.startDate&&s.startDate.trim()?s.startDate:void 0,endDate:s.endDate&&s.endDate.trim()?s.endDate:void 0,slug:s.slug||void 0,firstLesson:s.firstLessonTitle&&s.firstLessonTitle.trim()&&s.firstLessonVideoUrl&&s.firstLessonVideoUrl.trim()?{title:s.firstLessonTitle.trim(),videoUrl:s.firstLessonVideoUrl.trim(),description:s.firstLessonDescription?.trim()||void 0,order:0}:void 0,regionQuotas:s.regionRestrictionEnabled?j.map(l=>({state:l.state,city:l.city||null,limit:l.limit,waitlistLimit:l.waitlistLimit??0})):[]},d=await P("/admin/courses",{method:"POST",auth:!0,body:JSON.stringify(a)});if(B.length>0)try{for(const l of B)await P(`/admin/courses/${d.id}/lessons`,{method:"POST",auth:!0,body:JSON.stringify({title:l.title,description:l.description||void 0,videoUrl:l.videoUrl||void 0,bannerUrl:l.bannerUrl||void 0,duration:l.duration||void 0,order:l.order})})}catch(l){console.error("Erro ao clonar aulas:",l)}r(`/admin/courses/${d.id}/lessons`)}catch(t){const a=t instanceof Error?t.message:"Erro ao criar curso";g(a)}finally{C(!1)}};return R||_?e.jsx(ie,{}):e.jsxs("div",{className:"min-h-screen bg-gray-50",children:[e.jsx("header",{className:"bg-white shadow-sm sticky top-0 z-50",children:e.jsx("div",{className:"container mx-auto px-4 py-2",children:e.jsxs("div",{className:"flex flex-col md:flex-row items-center justify-between space-y-2 md:space-y-0",children:[e.jsx(h,{to:"/",className:"flex items-center",children:e.jsx("img",{src:"/logo B.png",alt:"Link de Cadastro",className:"h-20 md:h-24 w-auto object-contain"})}),e.jsxs("nav",{className:"flex items-center space-x-4 md:space-x-6 text-sm md:text-base",children:[e.jsx(h,{to:"/admin/dashboard",className:"text-gray-700 hover:text-[#FF6600]",children:"Dashboard"}),e.jsx(h,{to:"/admin/courses",className:"text-gray-700 hover:text-[#FF6600]",children:"Cursos"}),e.jsx(h,{to:"/admin/events",className:"text-gray-700 hover:text-[#FF6600]",children:"Eventos"}),e.jsx(me,{}),e.jsx(h,{to:"/profile",className:"w-8 h-8 md:w-10 md:h-10 rounded-full bg-[#FF6600] text-white font-bold flex items-center justify-center",children:F?.name?.charAt(0).toUpperCase()||"A"}),e.jsx("button",{onClick:()=>Y(),className:"bg-red-500 text-white px-4 py-2 rounded-md font-semibold hover:bg-red-600 transition-colors text-sm md:text-base",children:"Sair"})]})]})})}),e.jsx("div",{className:"container mx-auto px-4 py-8 pb-24 md:pb-8",children:e.jsxs("div",{className:"max-w-3xl mx-auto",children:[e.jsx(h,{to:"/admin/courses",className:"text-[#FF6600] hover:underline mb-4 inline-block",children:"← Voltar para Cursos"}),e.jsx("h1",{className:"text-3xl font-bold mb-8 text-[#003366]",children:"Criar Novo Curso"}),e.jsxs("form",{onSubmit:H(te),className:"bg-white rounded-lg shadow-md p-8 space-y-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Título do Curso *"}),e.jsx("input",{...n("title"),className:"w-full px-4 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-[#FF6600] focus:border-transparent text-gray-900",placeholder:"Ex: Workshop de Gestão de Viveiros"}),o.title&&e.jsx("p",{className:"text-red-500 text-sm mt-1",children:o.title.message})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Descrição"}),e.jsx("textarea",{...n("description"),rows:4,className:"w-full px-4 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-[#FF6600] focus:border-transparent text-gray-900",placeholder:"Descreva o curso..."}),o.description&&e.jsx("p",{className:"text-red-500 text-sm mt-1",children:o.description.message})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Banner do Curso (opcional)"}),e.jsx("p",{className:"text-xs text-gray-500 mb-2",children:"Formatos aceitos: JPG, PNG, GIF. Tamanho máximo: 5MB. Se não fornecer, o banner será extraído automaticamente do vídeo do YouTube da primeira aula."}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{children:[e.jsx("input",{type:"file",accept:"image/jpeg,image/jpg,image/png,image/gif,image/webp",onChange:s=>{const t=s.target.files?.[0];t&&ee(t)},disabled:A,className:"w-full px-4 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-[#FF6600] focus:border-transparent text-gray-900 disabled:opacity-50 cursor-pointer"}),A&&e.jsxs("p",{className:"text-sm text-blue-600 mt-1 flex items-center gap-2",children:[e.jsxs("svg",{className:"animate-spin h-4 w-4",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[e.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),e.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"Fazendo upload..."]}),f&&!A&&e.jsx("p",{className:"text-sm text-green-600 mt-1",children:"✅ Upload concluído com sucesso!"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm text-gray-600 mb-1",children:"Ou informe a URL do banner (opcional):"}),e.jsx("input",{type:"text",...n("bannerUrl"),className:"w-full px-4 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-[#FF6600] focus:border-transparent text-gray-900",placeholder:"https://exemplo.com/banner.jpg ou /uploads/banners/banner.jpg",onChange:s=>{const t=s.target.value.trim()||"";i("bannerUrl",t,{shouldValidate:!1}),t&&b(t)}}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Deixe em branco se já fez upload de uma imagem acima"})]}),(p||f)&&e.jsxs("div",{className:"mt-3",children:[e.jsx("p",{className:"text-sm text-gray-600 mb-2",children:"Preview:"}),e.jsx("img",{src:xe(p||f||""),alt:"Preview do banner",className:"w-full h-48 object-cover rounded-md border border-gray-300",onError:()=>b(null)})]})]}),o.bannerUrl&&e.jsx("p",{className:"text-red-500 text-sm mt-1",children:o.bannerUrl.message})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Tipo de Curso *"}),e.jsxs("select",{...n("type"),className:"w-full px-4 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-[#FF6600] focus:border-transparent text-gray-900",children:[e.jsx("option",{value:"ONLINE",children:"Online"}),e.jsx("option",{value:"PRESENCIAL",children:"Presencial"})]}),o.type&&e.jsx("p",{className:"text-red-500 text-sm mt-1",children:o.type.message})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Limite de Vagas (opcional)"}),e.jsx("input",{type:"number",min:"1",...n("maxEnrollments"),className:"w-full px-4 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-[#FF6600] focus:border-transparent text-gray-900",placeholder:"Ex: 50"}),o.maxEnrollments&&e.jsx("p",{className:"text-red-500 text-sm mt-1",children:o.maxEnrollments.message}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Deixe em branco para ilimitado"})]})]}),e.jsxs("div",{className:"rounded-lg border border-gray-200 bg-white p-4 shadow-sm",children:[e.jsxs("div",{className:"flex flex-col gap-2 sm:flex-row sm:items-center sm:justify-between",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold text-[#003366]",children:"Lista de Espera"}),e.jsx("p",{className:"text-sm text-gray-500",children:"Permita que interessados entrem em uma lista de espera quando as vagas acabarem."})]}),e.jsxs("label",{className:"inline-flex items-center gap-2 text-sm font-medium text-gray-700",children:[e.jsx("input",{type:"checkbox",...n("waitlistEnabled"),className:"h-5 w-5 rounded border-gray-300 text-[#FF6600] focus:ring-[#FF6600]"}),"Ativar lista de espera"]})]}),Z&&e.jsxs("div",{className:"mt-4",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Limite de vagas na lista de espera"}),e.jsx("input",{type:"number",min:"0",...n("waitlistLimit"),className:"w-full rounded-md border border-gray-300 px-4 py-2 text-gray-900 focus:border-transparent focus:ring-2 focus:ring-[#FF6600]",placeholder:"Ex: 10"}),e.jsx("p",{className:"mt-1 text-xs text-gray-500",children:"Utilize 0 para ilimitado. Sugestão: abrir até 10 vagas extras."})]})]}),e.jsxs("div",{className:"rounded-lg border border-gray-200 bg-white p-4 shadow-sm space-y-4",children:[e.jsxs("div",{className:"flex flex-col gap-2 sm:flex-row sm:items-center sm:justify-between",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold text-[#003366]",children:"Restrição por Região"}),e.jsx("p",{className:"text-sm text-gray-500",children:"Defina limites de vagas por estado/cidade e controle inscrições fora das regiões alvo."})]}),e.jsxs("label",{className:"inline-flex items-center gap-2 text-sm font-medium text-gray-700",children:[e.jsx("input",{type:"checkbox",...n("regionRestrictionEnabled"),className:"h-5 w-5 rounded border-gray-300 text-[#FF6600] focus:ring-[#FF6600]"}),"Ativar restrição regional"]})]}),K&&e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-1 gap-4 md:grid-cols-2",children:[e.jsxs("label",{className:"flex items-center gap-2 text-sm font-medium text-gray-700",children:[e.jsx("input",{type:"checkbox",...n("allowAllRegions"),className:"h-5 w-5 rounded border-gray-300 text-[#FF6600] focus:ring-[#FF6600]"}),"Permitir inscrições fora das regiões listadas (ficarão pendentes)"]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Limite padrão por região (opcional)"}),e.jsx("input",{type:"number",min:"0",...n("defaultRegionLimit"),className:"w-full rounded-md border border-gray-300 px-4 py-2 text-gray-900 focus:border-transparent focus:ring-2 focus:ring-[#FF6600]",placeholder:"Ex: 30"}),e.jsx("p",{className:"mt-1 text-xs text-gray-500",children:"Caso definido, aplica um limite padrão para regiões não especificadas."})]})]}),e.jsxs("div",{className:"rounded-md border border-dashed border-gray-300 p-4",children:[e.jsx("h4",{className:"text-sm font-semibold text-[#003366] mb-3",children:"Adicionar limite por região"}),e.jsxs("div",{className:"grid grid-cols-1 gap-3 md:grid-cols-5",children:[e.jsxs("select",{value:u.state,onChange:s=>N(t=>({...t,state:s.target.value})),className:"md:col-span-1 rounded-md border border-gray-300 px-3 py-2 text-gray-900 focus:border-transparent focus:ring-2 focus:ring-[#FF6600]",children:[e.jsx("option",{value:"",children:"Estado"}),fe.map(s=>e.jsx("option",{value:s.sigla,children:s.nome},s.sigla))]}),e.jsx("input",{value:u.city,onChange:s=>N(t=>({...t,city:s.target.value})),className:"md:col-span-1 rounded-md border border-gray-300 px-3 py-2 text-gray-900 focus:border-transparent focus:ring-2 focus:ring-[#FF6600]",placeholder:"Cidade (opcional)"}),e.jsx("input",{type:"number",min:"1",value:u.limit,onChange:s=>N(t=>({...t,limit:s.target.value})),className:"rounded-md border border-gray-300 px-3 py-2 text-gray-900 focus:border-transparent focus:ring-2 focus:ring-[#FF6600]",placeholder:"Vagas"}),e.jsx("input",{type:"number",min:"0",value:u.waitlistLimit,onChange:s=>N(t=>({...t,waitlistLimit:s.target.value})),className:"rounded-md border border-gray-300 px-3 py-2 text-gray-900 focus:border-transparent focus:ring-2 focus:ring-[#FF6600]",placeholder:"Lista espera"}),e.jsx("button",{type:"button",onClick:X,className:"rounded-md bg-[#003366] px-4 py-2 text-white font-semibold transition-colors hover:bg-[#00264d]",children:"Adicionar"})]}),$&&e.jsx("p",{className:"mt-2 text-sm text-red-500",children:$}),j.length>0&&e.jsx("div",{className:"mt-4 space-y-2",children:j.map((s,t)=>e.jsxs("div",{className:"flex flex-col gap-2 rounded-md border border-gray-200 bg-gray-50 px-3 py-2 text-sm text-gray-700 md:flex-row md:items-center md:justify-between",children:[e.jsxs("div",{className:"space-y-1",children:[e.jsxs("p",{className:"font-semibold text-[#003366]",children:[s.state,s.city?` - ${s.city}`:" (Estado inteiro)"]}),e.jsxs("p",{children:["Limite de vagas: ",e.jsx("strong",{children:s.limit})," · Lista de espera:"," ",e.jsx("strong",{children:s.waitlistLimit})]})]}),e.jsx("button",{type:"button",onClick:()=>q(t),className:"inline-flex items-center gap-1 text-sm font-medium text-red-600 hover:text-red-700",children:"Remover"})]},`${s.state}-${s.city||"all"}-${t}`))}),j.length===0&&e.jsx("p",{className:"mt-3 text-xs text-gray-500",children:"Defina ao menos uma região com limite para ativar a restrição."})]})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Status"}),e.jsxs("select",{...n("status"),className:"w-full px-4 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-[#FF6600] focus:border-transparent text-gray-900",children:[e.jsx("option",{value:"ACTIVE",children:"Ativo"}),e.jsx("option",{value:"INACTIVE",children:"Inativo"})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Data de Início (opcional)"}),e.jsx("input",{type:"datetime-local",...n("startDate"),className:"w-full px-4 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-[#FF6600] focus:border-transparent text-gray-900"}),o.startDate&&e.jsx("p",{className:"text-red-500 text-sm mt-1",children:o.startDate.message})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Data de Fim (opcional)"}),e.jsx("input",{type:"datetime-local",...n("endDate"),className:"w-full px-4 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-[#FF6600] focus:border-transparent text-gray-900"}),o.endDate&&e.jsx("p",{className:"text-red-500 text-sm mt-1",children:o.endDate.message})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"URL Personalizada (opcional)"}),e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center gap-2",children:[e.jsx("span",{className:"text-gray-500 text-sm sm:text-base whitespace-nowrap",children:"https://seudominio.com/c/"}),e.jsx("input",{type:"text",...n("slug"),placeholder:"meu-curso-especial",className:"flex-1 px-4 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-[#FF6600] focus:border-transparent text-gray-900"})]}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Use apenas letras minúsculas, números e hífens. Ex: meu-curso-especial"}),o.slug&&e.jsx("p",{className:"text-red-500 text-sm mt-1",children:o.slug.message})]}),e.jsxs("div",{className:"border-t pt-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold text-[#003366]",children:"Primeira Aula (opcional)"}),e.jsx("p",{className:"text-sm text-gray-500",children:"Adicione a primeira aula do curso agora"})]}),e.jsx("button",{type:"button",onClick:()=>U(!y),className:"text-[#FF6600] hover:text-[#e55a00] font-medium text-sm",children:y?"Ocultar":"Adicionar Primeira Aula"})]}),y&&e.jsxs("div",{className:"space-y-4 p-4 bg-gray-50 rounded-lg",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Título da Primeira Aula *"}),e.jsx("input",{...n("firstLessonTitle"),className:"w-full px-4 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-[#FF6600] focus:border-transparent text-gray-900",placeholder:"Ex: Introdução ao Curso"}),o.firstLessonTitle&&e.jsx("p",{className:"text-red-500 text-sm mt-1",children:o.firstLessonTitle.message})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:e.jsxs("span",{className:"flex items-center gap-2",children:[e.jsx("svg",{className:"w-5 h-5 text-red-600",fill:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{d:"M23.498 6.186a3.016 3.016 0 0 0-2.122-2.136C19.505 3.545 12 3.545 12 3.545s-7.505 0-9.377.505A3.017 3.017 0 0 0 .502 6.186C0 8.07 0 12 0 12s0 3.93.502 5.814a3.016 3.016 0 0 0 2.122 2.136c1.871.505 9.376.505 9.376.505s7.505 0 9.377-.505a3.015 3.015 0 0 0 2.122-2.136C24 15.93 24 12 24 12s0-3.93-.502-5.814zM9.545 15.568V8.432L15.818 12l-6.273 3.568z"})}),"Link do Vídeo do YouTube *"]})}),e.jsx("input",{type:"text",...n("firstLessonVideoUrl"),placeholder:"Cole aqui o link do YouTube (ex: https://www.youtube.com/watch?v=... ou https://youtu.be/...)",className:"w-full px-4 py-3 border-2 border-gray-300 rounded-md focus:ring-2 focus:ring-[#FF6600] focus:border-[#FF6600] text-gray-900",onChange:s=>{const t=s.target.value;if(i("firstLessonVideoUrl",t,{shouldValidate:!1}),t&&t.trim()){const a=Q(t);a&&(!p||p==="")&&(i("bannerUrl",a,{shouldValidate:!1}),b(a))}}}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Aceita links do YouTube em qualquer formato: youtube.com/watch?v=..., youtu.be/..., ou youtube.com/embed/..."}),o.firstLessonVideoUrl&&e.jsx("p",{className:"text-red-500 text-sm mt-1",children:o.firstLessonVideoUrl.message})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Descrição da Primeira Aula (opcional)"}),e.jsx("textarea",{...n("firstLessonDescription"),rows:3,className:"w-full px-4 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-[#FF6600] focus:border-transparent text-gray-900",placeholder:"Descreva a primeira aula..."})]})]})]}),z&&e.jsx("div",{className:"bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded",children:z}),e.jsxs("div",{className:"flex space-x-4",children:[e.jsx("button",{type:"submit",disabled:V,className:"flex-1 bg-[#FF6600] text-white py-3 px-6 rounded-md font-semibold hover:bg-[#e55a00] transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:V?"Criando...":"Criar Curso"}),e.jsx("button",{type:"button",onClick:()=>r(-1),className:"px-6 py-3 border border-gray-300 rounded-md text-gray-700 hover:bg-gray-50 transition-colors",children:"Cancelar"})]})]})]})}),e.jsx(ue,{})]})}export{Fe as default};
