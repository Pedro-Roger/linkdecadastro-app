const f=()=>typeof window<"u"&&window.APP_CONFIG?.API_URL?window.APP_CONFIG.API_URL:"http://localhost:3333",u=f();async function d(o,{auth:a,headers:i,...c}={}){const w=o.startsWith("http")?o:`${u}${o}`,n={"Content-Type":"application/json",...i||{}};if(a&&typeof window<"u"){const t=localStorage.getItem("token");t&&(n.Authorization=`Bearer ${t}`)}const e=await fetch(w,{...c,headers:n});if(!e.ok){let t="Erro na requisição";try{const s=await e.json();t=s.message||s.error||t}catch{t=e.statusText||t}const r=new Error(t);throw r.status=e.status,r}return await e.json()}export{d as a,f as g};
