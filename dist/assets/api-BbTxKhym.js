const a=()=>typeof window<"u"&&window.APP_CONFIG?.API_URL?window.APP_CONFIG.API_URL:"http://localhost:3333",d=a();async function h(e,{auth:t,headers:c,...f}={}){const u=e.startsWith("http")?e:`${d}${e}`,n={"Content-Type":"application/json",...c||{}};if(t&&typeof window<"u"){const r=localStorage.getItem("token");r&&(n.Authorization=`Bearer ${r}`)}const s=await fetch(u,{...f,headers:n,mode:"cors"});if(!s.ok){let r="Erro na requisição";try{const i=await s.json();r=i.message||i.error||r}catch{r=s.statusText||r}const o=new Error(r);throw o.status=s.status,o}return await s.json()}const w=e=>{if(!e||!e.trim())return"";const t=e.trim();return t.startsWith("http://")||t.startsWith("https://")?t:t.startsWith("/uploads/")?`${a()}${t}`:(t.startsWith("/"),t)};export{h as a,a as g,w as n};
