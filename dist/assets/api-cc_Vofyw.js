const n=()=>typeof window<"u"&&window.APP_CONFIG?.API_URL?window.APP_CONFIG.API_URL:"http://localhost:3333",d=n();async function p(e,{auth:t,headers:c,...u}={}){const f=e.startsWith("http")?e:`${d}${e}`,o={"Content-Type":"application/json",...c||{}};if(t&&typeof window<"u"){const r=localStorage.getItem("token");r&&(o.Authorization=`Bearer ${r}`)}const s=await fetch(f,{...u,headers:o,mode:"cors"});if(!s.ok){let r="Erro na requisição";try{const a=await s.json();r=a.message||a.error||r}catch{r=s.statusText||r}const i=new Error(r);throw i.status=s.status,i}return await s.json()}const h=e=>{if(!e||!e.trim())return"";const t=e.trim();return t.startsWith("http://")||t.startsWith("https://")?t:t.startsWith("/uploads/")?`${n()}${t}`:t.startsWith("/")?t:/\.(jpg|jpeg|png|gif|webp|svg)$/i.test(t)&&!t.includes("/")?`${n()}/uploads/banners/${t}`:t};export{p as a,n as g,h as n};
