import{u as i,d as r}from"./react-vendor-zMYjrXeL.js";function f(o){const s=i(),[a,u]=r.useState(null),[n,e]=r.useState(!0);r.useEffect(()=>{try{const t=localStorage.getItem("user"),l=localStorage.getItem("token");if(!t||!l){o?.requireAuth&&s(o.redirectTo||"/login"),e(!1);return}try{u(JSON.parse(t))}catch{u(null)}e(!1)}catch{e(!1)}},[]);function c(){localStorage.removeItem("token"),localStorage.removeItem("user"),s("/")}return{user:a,loading:n,isAuthenticated:!!a,signOut:c}}export{f as u};
